<!-- clock-in-out.component.html -->
<div class="clock-in-out-card">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-state">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading clock in/out data...</div>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !isLoading" class="error-state">
    <div class="error-message">{{ error }}</div>
    <button (click)="refreshData()" class="retry-button">Retry</button>
  </div>

  <!-- Main Content -->
  <div *ngIf="!isLoading && !error">
    <!-- Employee List -->
    <div class="employee-list">
      <!-- On-Time Employees (First 3) -->
      <div class="employee-group">
        <div class="employee-item" *ngFor="let employee of filteredEmployees | slice:0:3; trackBy: trackByEmployeeId">
          <div class="employee-row" (click)="toggleEmployeeDetails(employee)">
            <div class="employee-avatar">
              <img [src]="employee.avatar"
                   [alt]="employee.name"
                   (error)="$event.target.src='assets/default.jpg'">
            </div>

            <div class="employee-info">
              <div class="employee-name">{{ employee.name }}</div>
              <div class="employee-position">{{ employee.position }}</div>
            </div>

            <div class="time-indicator">
              <div class="clock-icon"></div>
            </div>

            <div class="clock-in-time" [ngClass]="{'on-time': !employee.isLate, 'late': employee.isLate}">
              {{ employee.clockInTime }}
            </div>
          </div>

          <!-- Expanded Details -->
          <div class="employee-details" *ngIf="employee.isExpanded">
            <div class="details-item">
              <div class="detail-dot green-dot"></div>
              <div class="detail-label">Clock In</div>
              <div class="detail-value">{{ employee.clockInTime }}</div>
            </div>

            <div class="details-item">
              <div class="detail-dot orange-dot"></div>
              <div class="detail-label">Clock Out</div>
              <div class="detail-value">{{ employee.clockOutTime }}</div>
            </div>

            <div class="details-item">
              <div class="detail-dot yellow-dot"></div>
              <div class="detail-label">Production</div>
              <div class="detail-value">{{ employee.productionTime }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Late Employees Section (Remaining employees) -->
      <div class="section-divider" *ngIf="(filteredEmployees | slice:3).length > 0">
        <h3 class="section-title">Late</h3>
      </div>

      <div class="employee-group">
        <div class="employee-item" *ngFor="let employee of filteredEmployees | slice:3; trackBy: trackByEmployeeId">
          <div class="employee-row" (click)="toggleEmployeeDetails(employee)">
            <div class="employee-avatar">
              <img [src]="employee.avatar"
                   [alt]="employee.name"
                   (error)="$event.target.src='assets/default.jpg'">
            </div>

            <div class="employee-info">
              <div class="employee-name">{{ employee.name }}</div>
              <div class="employee-position">{{ employee.position }}</div>
            </div>

            <div class="late-badge" *ngIf="employee.isLate && employee.lateMinutes">
              {{ employee.lateMinutes }} Min
            </div>

            <div class="time-indicator">
              <div class="clock-icon"></div>
            </div>

            <div class="clock-in-time" [ngClass]="{'on-time': !employee.isLate, 'late': employee.isLate}">
              {{ employee.clockInTime }}
            </div>
          </div>

          <!-- Expanded Details -->
          <div class="employee-details" *ngIf="employee.isExpanded">
            <div class="details-item">
              <div class="detail-dot green-dot"></div>
              <div class="detail-label">Clock In</div>
              <div class="detail-value">{{ employee.clockInTime }}</div>
            </div>

            <div class="details-item">
              <div class="detail-dot orange-dot"></div>
              <div class="detail-label">Clock Out</div>
              <div class="detail-value">{{ employee.clockOutTime }}</div>
            </div>

            <div class="details-item">
              <div class="detail-dot yellow-dot"></div>
              <div class="detail-label">Production</div>
              <div class="detail-value">{{ employee.productionTime }}</div>
            </div>

            <div class="details-item" *ngIf="employee.isLate">
              <div class="detail-dot red-dot"></div>
              <div class="detail-label">Late by</div>
              <div class="detail-value">{{ getLateMinutesDisplay(employee) }}</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Empty State -->
      <div *ngIf="filteredEmployees.length === 0" class="empty-state">
        <div class="empty-icon">üïê</div>
        <div class="empty-message">No clock in/out data available for selected filters</div>
        <button (click)="changeDepartment('All Departments')" class="clear-filters-button">
          Clear Filters
        </button>
      </div>
    </div>

    <!-- View All Link -->
    <div class="view-all-section">
      <a href="#" class="view-all-link">View All Attendance</a>
    </div>
  </div>
</div>
